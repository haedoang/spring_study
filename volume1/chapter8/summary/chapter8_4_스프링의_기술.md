## 8.4 스프링의 기술
- POJO 프로그래밍을 손쉽게 할 수 있도록 지원하는 가능기술
    - IoC/DI
    - AOP
    - PSA   

### 제어의 역전(IoC) / 의존관계 주입(DI)
- 두 개의 오브젝트를 분리해서 만들고, 인터페이스를 통해 느슨하게 연결 한 뒤, DI를 통해 외부로부터 주입받는 이유는 `유연한 확장이 가능하게 하기 위함`이다
- DI는 개방 폐쇄 원칙(OCP)으로 설명할 수 있다

##### DI 활용 방법
- 핵심기능의 변경 
    - 의존 대상의 구현을 바꾼다
    - DAO의 구현을 JDBC => JPA, 하이버네이트 등으로 바꾸는 것을 말 한다
- 핵심기능의 동적인 변경
    - 의존 오브젝트의 핵심 기능 자체를 바꾼다
    - 애플리케이션이 동작하는 중간에 그 의존 대상을 다이내믹하게 변경할 수 있다
    - 사용자 등급에 따라 다른 `DataSource`를 사용하는 것
- 부가기능의 추가
    - 핵심기능은 그대로 둔 채 부가기능을 추가한다
    - 데코레이터 패턴
    - 트랜잭션 기능을 부여했던 것이 대표적인 예이다
- 인터페이스의 변경
    - 사용하려는 오브젝트가 가진 인터페이스가 클라이언트와 호환되지 않은 경우 `어댑터 오브젝트`, `서비스 추상화`를 사용한다
- 프록시
    - 필요한 시점에서 실제 사용할 오브젝트를 초기화하고 리소스를 준비하게 해주는 지연된 로딩을 적용할 때 사용한다
- 템플릿과 콜백
    - 자주 바뀌는 부분을 분리하여 템플릿과 콜백으로 만들어 DI 원리를 적용하여 코드를 간결하게 만든다
- 싱글톤과 오브젝트 스코프
    - DI할 오브젝트의 생명주기를 제어할 수 있다
    - 스프링은 기본 스코프를 `싱글톤`으로 한다
    - 무상태 오브젝트에 여러 스레드가 요청이 와도 안전하다
- 테스트
    - 여타 오브젝트와 협력해서 동작하는 오브젝트는 `고립` 테스트가 효과적이다
    - `스텁` 또는 `목 오브젝트`같은 테스트 대역을 사용하도록 한다

### 애스퍽트 지향 프로그래밍(AOP)
- 점점 복잡해져가는 애플리케이션의 요구조건과 기술적인 난해함을 해결해준다
- 순수한 객체지향 기법만으로 POJO의 조건을 유지하도록 `AOP`가 필요하다

##### AOP 적용 기법
- 스프링과 같이 다이내믹 프록시를 사용한다
    - 데코레이터 패턴을 사용한다
- 언어의 확장을 이용한다(AspectJ)
    - 스프링 다이내믹 프록시보다 다양한 기능을 제공하는 `AspectJ`

##### AOP 적용 단계
- AOP는 하나의 모듈이 수많은 오브젝트에 보이지 않게 적용되기 때문에 주의해야 한다
1. AOP 적용1단계: 미리 준비된 AOP 이용
    - `트랜잭션`, `@Configurable` 
2. AOP 적용2단계: 전담팀을 통한 정책 AOP 이용
    - 비즈니스 로직을 가진 오브젝트에 대한 보안, 로깅, 트레이싱 등
    - 정책 검증을 위한 AOP 사용
3. AOP 적용3단계: AOP의 자유로운 이용
    - 개발자 스스로가 AOP를 활용할 수 있는 단계 


### 포터블 서비스 추상화(PSA)
- 환경과 세부 기술의 변화에 관계없이 일관된 방식으로 기술에 접근할 수 있게 해준다
